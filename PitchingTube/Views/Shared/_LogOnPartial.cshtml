@model PitchingTube.Models.LogOnModel
           
@if(Request.IsAuthenticated) {
    <img src="@Url.Content(PitchingTube.Models.Util.GetAvatarPath())" height="20px" />
    <text>Welcome @Html.ActionLink(User.Identity.Name,"AccountSettings","Account") @*<strong>@User.Identity.Name</strong>*@!
    [ @Html.ActionLink("Log Off", "LogOff", "Account") ]</text>
}
else {
    @:[<a id="logon" href="#">Log On</a> ]@*@Html.ActionLink("Log On", "LogOn", "Account") ]*@
    <div id="dialog" title="Log On">
        
        <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

        @using (Html.BeginForm("LogOn","Account",FormMethod.Post)) {
            <div>
                <fieldset>
                    <legend>Account Information</legend>

                    <div class="editor-label">
                        @Html.LabelFor(m => m.Email)
                    </div>
                    <div class="editor-field">
                        @Html.TextBoxFor(m => m.Email)
                        @Html.ValidationMessageFor(m => m.Email)
                    </div>

                    <div class="editor-label">
                        @Html.LabelFor(m => m.Password)
                    </div>
                    <div class="editor-field">
                        @Html.PasswordFor(m => m.Password)
                        @Html.ValidationMessageFor(m => m.Password)
                    </div>

                    <div>
                        @Html.ActionLink("Fogot password?", "FogotPassword", "Account")
                    </div>

                    <div class="editor-label">
                        @Html.CheckBoxFor(m => m.RememberMe)
                        @Html.LabelFor(m => m.RememberMe)
                    </div>

                    <p>
                        <input type="submit" value="Log On" />
                    </p>
                </fieldset>
            </div>
        }

    </div>
}

<script type="text/javascript">
    $(function () {
        $('#dialog').dialog({
                autoOpen: false,
                modal: true,
                resizable:false
            });

        $('#logon').click(function () {
            $('#dialog').dialog("open");
            return false;
        });

    });
</script>